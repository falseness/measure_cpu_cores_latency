# measure_cpu_cores_latency

This project measures the latency of passing cache lines between CPU cores on Linux.

## How to run

./compile_and_run.sh

```bash
==== 1 cache line (median) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  41.7  50.0 158.3 166.7 166.7
  2  41.7     -  66.7 158.3 158.3 166.7
  4  50.0  41.7     - 158.3 166.7 166.7
  6 158.3 141.7 125.0     -  50.0  66.7
  8 158.3 141.7 150.0  66.7     -  66.7
 10 150.0 141.7 141.7  66.7  66.7     -

==== 1 cache line (p90) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  50.0  50.0 166.7 191.7 175.0
  2  50.0     -  66.7 175.0 166.7 166.7
  4  50.0  50.0     - 191.7 175.0 175.0
  6 166.7 150.0 150.0     -  66.7  66.7
  8 166.7 150.0 150.0  66.7     -  66.7
 10 166.7 150.0 150.0  66.7  66.7     -

==== 1 cache line (p95) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  50.0  50.0 200.0 291.7 250.0
  2  50.0     -  75.0 216.7 191.7 200.0
  4  50.0  58.3     - 291.7 258.3 225.0
  6 183.3 166.7 158.3     -  66.7  66.7
  8 191.7 225.0 166.7  66.7     -  66.7
 10 191.7 166.7 233.3  66.7  75.0     -

==== 2 cache lines (median) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  50.0  66.7 158.3 150.0 166.7
  2  41.7     -  66.7 158.3 158.3 166.7
  4  66.7  58.3     - 158.3 166.7 166.7
  6 150.0 141.7 158.3     -  58.3  66.7
  8 158.3 141.7 166.7  41.7     -  66.7
 10 158.3 150.0 166.7  50.0  58.3     -

==== 2 cache lines (p90) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  50.0  66.7 175.0 158.3 191.7
  2  50.0     -  66.7 183.3 175.0 183.3
  4  66.7  58.3     - 175.0 183.3 191.7
  6 158.3 150.0 191.7     -  66.7  66.7
  8 183.3 150.0 183.3  50.0     -  66.7
 10 183.3 150.0 183.3  50.0  58.3     -

==== 2 cache lines (p95) ====
cpu     0     2     4     6     8    10
--- ----- ----- ----- ----- ----- -----
  0     -  50.0  75.0 200.0 191.7 266.7
  2  50.0     -  66.7 241.7 200.0 216.7
  4  66.7  58.3     - 200.0 208.3 266.7
  6 191.7 175.0 250.0     -  75.0  66.7
  8 250.0 158.3 200.0  50.0     -  66.7
 10 266.7 158.3 200.0  50.0  58.3     -
```



## Features
- Pin sender/receiver threads to specific cores.
- Measures transfer time for **1 cache line (64B)** and **2 cache lines (128B)**.
- Reports **median, p90, p95** latencies in nanoseconds.